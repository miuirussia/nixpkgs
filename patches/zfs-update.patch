From 782d97768bcd30777187ad71b120d05ee81bb793 Mon Sep 17 00:00:00 2001
From: Ryan Burns <rtburns@protonmail.com>
Date: Thu, 1 Dec 2022 20:01:28 -0800
Subject: [PATCH] zfs: 2.1.6 -> 2.1.7

---
 pkgs/os-specific/linux/zfs/default.nix | 15 +++++++--------
 1 file changed, 7 insertions(+), 8 deletions(-)

diff --git a/pkgs/os-specific/linux/zfs/default.nix b/pkgs/os-specific/linux/zfs/default.nix
index a7a6a9b7954e38..b9fa8cff934b28 100644
--- a/pkgs/os-specific/linux/zfs/default.nix
+++ b/pkgs/os-specific/linux/zfs/default.nix
@@ -16,7 +16,6 @@
 , enablePython ? true
 
 # for determining the latest compatible linuxPackages
-, linuxPackages_5_15 ? pkgs.linuxKernel.packages.linux_5_15
 , linuxPackages_6_0 ? pkgs.linuxKernel.packages.linux_6_0
 }:
 
@@ -217,13 +216,13 @@ in {
   # to be adapted
   zfsStable = common {
     # check the release notes for compatible kernels
-    kernelCompatible = kernel.kernelOlder "5.20";
-    latestCompatibleLinuxPackages = linuxPackages_5_15;
+    kernelCompatible = kernel.kernelOlder "6.1";
+    latestCompatibleLinuxPackages = linuxPackages_6_0;
 
     # this package should point to the latest release.
-    version = "2.1.6";
+    version = "2.1.7";
 
-    sha256 = "sha256-gd5WlNtnoSiVj4sKUGf0WhR7Z1GPebwu3Z1mkNsoC/I=";
+    sha256 = "sha256-vLm6RE11nqOCoYXne79JU3nUQnVEUNbwrULwFfghWcI=";
   };
 
   zfsUnstable = common {
@@ -235,10 +234,10 @@ in {
     # IMPORTANT: Always use a tagged release candidate or commits from the
     # zfs-<version>-staging branch, because this is tested by the OpenZFS
     # maintainers.
-    version = "2.1.7-staging-2022-11-08";
-    rev = "0f4ee295ba94803e5833f57481cfdbee5d1160d4";
+    version = "2.1.8-staging-2022-12-01";
+    rev = "21bd7661334cd865d17934bebbcaf8d3356279ee";
 
-    sha256 = "sha256-AixYjnr8MgST/VxEPY4NdcAvpoKiJ3zrvOai5bJjC/U=";
+    sha256 = "sha256-vLm6RE11nqOCoYXne79JU3nUQnVEUNbwrULwFfghWcI=";
 
     isUnstable = true;
   };
